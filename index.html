<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>[Project Name Here]</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>

        <style>
            .line {
              fill: none;
              stroke: #2d0f41;
              stroke-width: 2;
            }

            .buy1 { fill: #2c5a9c }
            .buy2 { fill: #3984b6 }
            .sell1 { fill: #e3572a }
            .sell2 { fill: #e97e3b }
        </style>
    </head>

    <body>
        <svg width="1000" height="400">
            <g class="area buy3"></g>
            <g class="area buy2"></g>
            <g class="area buy1"></g>
            <g class="area sell1"></g>
            <g class="area sell2"></g>
            <g class="area sell3"></g>
            <path class="line"></path>
        </svg>

        <script>
            // Chart data
            const blocks =
            [
                { index: '5111256',
                  mean: '1',
                  volume: 1816,
                  buckets:
                   { '90-100': 2,
                     '20-30': 3,
                     '10-20': 1,
                     '4-5': 2,
                     '3-4': 3,
                     '2-3': 9,
                     '1-2': 22,
                     '0.6-0.7': 2,
                     '0.5-0.6': 173,
                     '0.4-0.5': 11,
                     '0.3-0.4': 287,
                     '0.2-0.3': 274,
                     '0.1-0.2': 835,
                     '0-0.1': 192 } },
                { index: '5111262',
                  mean: '1',
                  volume: 1731,
                  buckets:
                   { '50-60': 1,
                     '30-40': 3,
                     '20-30': 1,
                     '10-20': 1,
                     '4-5': 1,
                     '3-4': 5,
                     '2-3': 9,
                     '1-2': 36,
                     '0.6-0.7': 2,
                     '0.5-0.6': 173,
                     '0.4-0.5': 11,
                     '0.3-0.4': 286,
                     '0.2-0.3': 274,
                     '0.1-0.2': 835,
                     '0-0.1': 93 } },
                { index: '5111269',
                  mean: '3',
                  volume: 1792,
                  buckets:
                   { '90-100': 2,
                     '40-50': 1,
                     '30-40': 3,
                     '20-30': 7,
                     '10-20': 2,
                     '4-5': 1,
                     '3-4': 18,
                     '2-3': 5,
                     '1-2': 16,
                     '0.6-0.7': 2,
                     '0.5-0.6': 173,
                     '0.4-0.5': 11,
                     '0.3-0.4': 285,
                     '0.2-0.3': 273,
                     '0.1-0.2': 832,
                     '0-0.1': 161 } },
                { index: '5111270',
                  mean: '3',
                  volume: 1931,
                  buckets:
                   { '90-100': 6,
                     '70-80': 1,
                     '60-70': 1,
                     '50-60': 4,
                     '40-50': 3,
                     '30-40': 40,
                     '20-30': 22,
                     '10-20': 8,
                     '5-10': 1,
                     '4-5': 3,
                     '3-4': 21,
                     '2-3': 11,
                     '1-2': 38,
                     '0.6-0.7': 3,
                     '0.5-0.6': 173,
                     '0.4-0.5': 11,
                     '0.3-0.4': 285,
                     '0.2-0.3': 273,
                     '0.1-0.2': 832,
                     '0-0.1': 165 } },
                { index: '5111282',
                  mean: '1',
                  volume: 1831,
                  buckets:
                   { '50-60': 2,
                     '40-50': 1,
                     '20-30': 1,
                     '10-20': 1,
                     '4-5': 1,
                     '3-4': 17,
                     '2-3': 6,
                     '1-2': 13,
                     '0.6-0.7': 3,
                     '0.5-0.6': 173,
                     '0.4-0.5': 11,
                     '0.3-0.4': 285,
                     '0.2-0.3': 273,
                     '0.1-0.2': 832,
                     '0-0.1': 211 } },
                { index: '5111297',
                  mean: '3',
                  volume: 1533,
                  buckets:
                   { '30-40': 1,
                     '20-30': 2,
                     '10-20': 1,
                     '4-5': 1,
                     '3-4': 9,
                     '2-3': 5,
                     '1-2': 22,
                     '0.6-0.7': 2,
                     '0.5-0.6': 165,
                     '0.4-0.5': 11,
                     '0.3-0.4': 280,
                     '0.2-0.3': 366,
                     '0.1-0.2': 495,
                     '0-0.1': 172 } },
                { index: '5111300',
                  mean: '1',
                  volume: 1628,
                  buckets:
                   { '90-100': 3,
                     '50-60': 1,
                     '40-50': 3,
                     '30-40': 20,
                     '20-30': 20,
                     '10-20': 2,
                     '5-10': 2,
                     '4-5': 6,
                     '3-4': 10,
                     '2-3': 6,
                     '1-2': 21,
                     '0.6-0.7': 2,
                     '0.5-0.6': 165,
                     '0.4-0.5': 11,
                     '0.3-0.4': 280,
                     '0.2-0.3': 366,
                     '0.1-0.2': 495,
                     '0-0.1': 192 } },
                { index: '5111304',
                  mean: '1',
                  volume: 1633,
                  buckets:
                   { '20-30': 3,
                     '10-20': 1,
                     '4-5': 1,
                     '3-4': 44,
                     '2-3': 8,
                     '1-2': 29,
                     '0.6-0.7': 2,
                     '0.5-0.6': 165,
                     '0.4-0.5': 11,
                     '0.3-0.4': 280,
                     '0.2-0.3': 366,
                     '0.1-0.2': 495,
                     '0-0.1': 228 } },
                { index: '5111308',
                  mean: '2',
                  volume: 1760,
                  buckets:
                   { '90-100': 12,
                     '60-70': 1,
                     '50-60': 6,
                     '40-50': 2,
                     '30-40': 9,
                     '20-30': 21,
                     '10-20': 2,
                     '5-10': 5,
                     '4-5': 4,
                     '3-4': 47,
                     '2-3': 12,
                     '1-2': 41,
                     '0.6-0.7': 2,
                     '0.5-0.6': 165,
                     '0.4-0.5': 11,
                     '0.3-0.4': 280,
                     '0.2-0.3': 366,
                     '0.1-0.2': 496,
                     '0-0.1': 243 } },
                { index: '5111311',
                  mean: '2',
                  volume: 1706,
                  buckets:
                   { '40-50': 1,
                     '30-40': 1,
                     '20-30': 3,
                     '10-20': 1,
                     '5-10': 2,
                     '4-5': 1,
                     '3-4': 43,
                     '2-3': 6,
                     '1-2': 50,
                     '0.6-0.7': 2,
                     '0.5-0.6': 165,
                     '0.4-0.5': 11,
                     '0.3-0.4': 280,
                     '0.2-0.3': 366,
                     '0.1-0.2': 506,
                     '0-0.1': 261 } }
            ];

            var areaPointsBuy = [
                {x: 0, low: 180, high: 200},
                {x: 100, low: 50, high: 100},
                {x: 200, low: 120, high: 150},
                {x: 300, low: 120, high: 175},
                {x: 400, low: 110, high: 160},
                {x: 500, low: 110, high: 140},
                {x: 600, low: 110, high: 120},
                {x: 700, low: 110, high: 130},
                {x: 800, low: 100, high: 110},
                {x: 900, low: 50, high: 90},
                {x: 1000, low: 190, high: 200}
            ];

            var areaPointsBuy2 = [
                {x: 0, low: 150, high: 180},
                {x: 100, low: 40, high: 50},
                {x: 200, low: 100, high: 120},
                {x: 300, low: 90, high: 120},
                {x: 400, low: 80, high: 110},
                {x: 500, low: 90, high: 110},
                {x: 600, low: 80, high: 110},
                {x: 700, low: 70, high: 110},
                {x: 800, low: 90, high: 100},
                {x: 900, low: 30, high: 50},
                {x: 1000, low: 170, high: 190}
            ];

            var areaPointsSell = [
                {x: 0, low: 200, high: 240},
                {x: 100, low: 100, high: 120},
                {x: 200, low: 150, high: 190},
                {x: 300, low: 175, high: 185},
                {x: 400, low: 160, high: 200},
                {x: 500, low: 140, high: 150},
                {x: 600, low: 120, high: 130},
                {x: 700, low: 130, high: 140},
                {x: 800, low: 110, high: 140},
                {x: 900, low: 90, high: 100},
                {x: 1000, low: 200, high: 220}
            ];

            var areaPointsSell2 = [
                {x: 0, low: 240, high: 280},
                {x: 100, low: 120, high: 150},
                {x: 200, low: 190, high: 220},
                {x: 300, low: 185, high: 195},
                {x: 400, low: 200, high: 220},
                {x: 500, low: 150, high: 180},
                {x: 600, low: 130, high: 150},
                {x: 700, low: 140, high: 150},
                {x: 800, low: 140, high: 160},
                {x: 900, low: 100, high: 120},
                {x: 1000, low: 220, high: 240}
            ];

            var linePoints = [
                [0, 200],
                [100, 100],
                [200, 150],
                [300, 175],
                [400, 160],
                [500, 140],
                [600, 120],
                [700, 130],
                [800, 110],
                [900, 90],
                [1000, 200]
            ];
        </script>

        <script>
            const maxGasPrice = parseInt(d3.max(blocks, (block) => block.mean));
            const maxPendingTransactions = parseInt(d3.max(blocks, (block) => block.volume));

            var scale =
            {
                price:
                {
                    x: d3.scaleLinear().domain([0, 10]).range([0, 1000]),
                    y: d3.scaleLinear().domain([-maxGasPrice, maxGasPrice * 2]).range([400, 0])
                },

                mempool:
                {
                    x: d3.scaleLinear().domain([0, 10]).range([0, 1000]),
                    y: d3.scaleLinear().domain([0, maxPendingTransactions]).range([400, 0])
                },
            };

            var lineGenerator = d3.line().curve(d3.curveCatmullRom.alpha(1))
            .x(function(d, i) {
                return scale.price.x(i);
            })
            .y(function(d) {
                return scale.price.y(d);
            });

            var areaGenerator = d3.area().curve(d3.curveCatmullRom.alpha(1))
            .x(function(d) {
                return scale.mempool.x(d);
            })
            .y0(function(d) {
                return scale.mempool.y(d.low);
            })
            .y1(function(d) {
                return scale.mempool.y(d.high);
            });

            var areaBuy = areaGenerator(areaPointsBuy);
            var areaBuy2 = areaGenerator(areaPointsBuy2);
            var areaSell = areaGenerator(areaPointsSell);
            var areaSell2 = areaGenerator(areaPointsSell2);
            var line = lineGenerator(blocks.map((block) => parseInt(block.mean)));

/*
            d3.select('.buy1').append('path').attr('d', areaBuy);
            d3.select('.buy2').append('path').attr('d', areaBuy2);
            d3.select('.sell1').append('path').attr('d', areaSell);
            d3.select('.sell2').append('path').attr('d', areaSell2);
*/
            d3.select('.line').attr('d', line);
        </script>
    </body>
</html>
